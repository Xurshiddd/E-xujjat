import{d as q,r as g,c as r,o,a as w,b as y,h as A,w as z,f as F,e,n as f,t as d,p as m,F as v,g as C,T as G,k as K,v as L,q as $}from"./app-C0v-dLAl.js";import{_ as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-C3bSX_au.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C1eGB6Ej.js";import"./useForwardExpose-DWa8dwqJ.js";import"./VisuallyHidden-BoVam2BP.js";const H={class:"container mx-auto px-4 py-8 max-w-4xl"},J={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden p-6"},O={class:"mb-8"},Q={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3"},W=["onClick"],X={class:"text-gray-800 dark:text-gray-100"},Z={class:"mb-8"},ee={class:"flex flex-wrap gap-3"},te=["onClick"],ae={class:"text-gray-800 dark:text-gray-100"},se={class:"mb-6"},le={class:"file-drop-area p-8 text-center dark:border-gray-600 dark:bg-gray-700/40"},re={class:"flex flex-col items-center justify-center"},oe={key:0,class:"mt-4"},ie={class:"space-y-2"},de={class:"flex items-center"},ne={class:"font-medium text-gray-800 dark:text-gray-100"},ue={class:"text-xs text-gray-500 dark:text-gray-400"},ge=["onClick"],ce={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},fe={class:"flex flex-wrap gap-4"},me={class:"flex items-center"},xe={class:"font-medium text-gray-800 dark:text-gray-100"},pe={class:"flex items-center"},ye={class:"font-medium text-gray-800 dark:text-gray-100"},ve={class:"flex items-center"},be={class:"font-medium text-gray-800 dark:text-gray-100"},ke={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},he={class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md"},_e={class:"mb-4"},we=q({__name:"Create",props:{folders:{},categories:{}},setup(j){let b=[],k=[];const N=j;b=N.folders||null,k=N.categories||null;const n=g(null),u=g(null),i=g([]),h=g(!1),c=g(""),x=g(""),M=g(!1);function p(a,t=!1){x.value=a,M.value=t,setTimeout(()=>x.value="",5e3)}function B(a){n.value=a}function P(a){u.value=a.id}function T(a){const t=a.target.files;if(t){const s=Array.from(t),l=s.filter(S=>S.size<=50971520);l.length<s.length&&alert("Fayl hajmi 20 MB dan oshmasligi kerak!"),i.value=l}}function D(a){i.value.splice(a,1)}function E(){h.value=!0,c.value=""}function _(){h.value=!1,c.value=""}function U(){c.value.trim()&&($.post("/folders",{name:c.value.trim()}).then(a=>{b.push(a.data.data),B(a.data.data),_(),p(a.data.data.message||"Papka muvaffaqiyatli yaratildi!",!1)}).catch(a=>{console.error("Error creating folder:",a),p(a.response?.data?.data?.message||"Failed to create folder. Please try again.",!0)}),_())}function V(a){if(a===0)return"0 Bytes";const t=1024,s=["Bytes","KB","MB","GB"],l=Math.floor(Math.log(a)/Math.log(t));return parseFloat((a/Math.pow(t,l)).toFixed(2))+" "+s[l]}function I(){if(!n.value){alert("Please select a folder");return}if(!u.value){alert("Please select a category");return}if(i.value.length===0){alert("Please select at least one file to upload");return}const a=new FormData;a.append("folder_id",n.value.id.toString()),a.append("category_id",u.value.toString()),i.value.forEach(t=>{a.append("files[]",t)}),$.post("/archives",a,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{p(t.data.data?.message||"Files uploaded successfully!",!1),n.value=null,u.value=null,i.value=[]}).catch(t=>{console.error("Error uploading files:",t),p(t.response?.data?.data?.message||"Failed to upload files. Please try again.",!0)}),n.value=null,u.value=null,i.value=[]}return(a,t)=>(o(),r(v,null,[w(y(A),{title:"Arxivlar yaratish"}),w(R,null,{default:z(()=>[x.value?(o(),r("div",{key:0,class:f(["fixed top-4 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded shadow-lg z-50 transition",M.value?"bg-red-500 text-white":"bg-green-500 text-white"])},d(x.value),3)):F("",!0),e("div",H,[e("div",J,[t[17]||(t[17]=e("h1",{class:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2"},"Upload Your Files",-1)),t[18]||(t[18]=e("p",{class:"text-gray-600 dark:text-gray-400 mb-6"},"Select folder and category for better organization",-1)),e("div",O,[t[2]||(t[2]=e("h2",{class:"text-xl font-semibold text-gray-700 dark:text-gray-200 mb-4 flex items-center"},[e("i",{class:"fas fa-folder-open mr-2 text-indigo-500"}),m(" Select Folder ")],-1)),e("div",Q,[(o(!0),r(v,null,C(y(b),s=>(o(),r("div",{key:s.id,class:f(["folder-item cursor-pointer p-3 border rounded-lg flex items-center dark:border-gray-600",{"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/40":n.value?.id===s.id}]),onClick:l=>B(s)},[e("i",{class:f(`fas ${s.icon} mr-3 text-xl ${s.color}`)},null,2),e("span",X,d(s.name),1)],10,W))),128))]),e("div",{class:"mt-4"},[e("button",{onClick:E,class:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 flex items-center"},t[1]||(t[1]=[e("i",{class:"fas fa-plus-circle mr-2"},null,-1),m(" Create New Folder ",-1)]))])]),e("div",Z,[t[3]||(t[3]=e("h2",{class:"text-xl font-semibold text-gray-700 dark:text-gray-200 mb-4 flex items-center"},[e("i",{class:"fas fa-tags mr-2 text-indigo-500"}),m(" Select Category ")],-1)),e("div",ee,[(o(!0),r(v,null,C(y(k),s=>(o(),r("div",{key:s.id,class:f(["category-pill cursor-pointer px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center",{"bg-indigo-100 dark:bg-indigo-900/40 border border-indigo-300 dark:border-indigo-600":u.value===s.id}]),onClick:l=>P(s)},[e("i",{class:f(`fas ${s.icon} mr-2 ${s.color}`)},null,2),e("span",ae,d(s.name),1)],10,te))),128))])]),e("div",se,[t[11]||(t[11]=e("h2",{class:"text-xl font-semibold text-gray-700 dark:text-gray-200 mb-4 flex items-center"},[e("i",{class:"fas fa-cloud-upload-alt mr-2 text-indigo-500"}),m(" Upload Files ")],-1)),e("div",le,[e("div",re,[t[4]||(t[4]=e("i",{class:"fas fa-cloud-upload-alt text-5xl text-indigo-400 mb-4"},null,-1)),t[5]||(t[5]=e("p",{class:"text-gray-600 dark:text-gray-300 mb-2"},"Drag & drop your files here",-1)),t[6]||(t[6]=e("p",{class:"text-gray-500 dark:text-gray-400 text-sm mb-4"},"or",-1)),t[7]||(t[7]=e("label",{for:"fileInput",class:"cursor-pointer px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition"}," Browse Files ",-1)),e("input",{type:"file",id:"fileInput",class:"hidden",multiple:"",onChange:T},null,32)])]),i.value.length>0?(o(),r("div",oe,[t[10]||(t[10]=e("h3",{class:"font-medium text-gray-700 dark:text-gray-200 mb-2"},"Selected Files:",-1)),e("div",ie,[(o(!0),r(v,null,C(i.value,(s,l)=>(o(),r("div",{key:s.name+l,class:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded"},[e("div",de,[t[8]||(t[8]=e("i",{class:"fas fa-file text-indigo-500 mr-3"},null,-1)),e("div",null,[e("div",ne,d(s.name),1),e("div",ue,d(V(s.size)),1)])]),e("button",{onClick:S=>D(l),class:"text-red-500 hover:text-red-700"},t[9]||(t[9]=[e("i",{class:"fas fa-times"},null,-1)]),8,ge)]))),128))])])):F("",!0)]),e("div",ce,[t[16]||(t[16]=e("h3",{class:"font-medium text-gray-700 dark:text-gray-200 mb-2"},"Upload Summary:",-1)),e("div",fe,[e("div",me,[t[12]||(t[12]=e("span",{class:"text-gray-600 dark:text-gray-400 mr-2"},"Folder:",-1)),e("span",xe,d(n.value?.name||"Not selected"),1)]),e("div",pe,[t[13]||(t[13]=e("span",{class:"text-gray-600 dark:text-gray-400 mr-2"},"Category:",-1)),e("span",ye,d(y(k).find(s=>s.id===u.value)?.name||"Not selected"),1)]),e("div",ve,[t[14]||(t[14]=e("span",{class:"text-gray-600 dark:text-gray-400 mr-2"},"Files:",-1)),e("span",be,d(i.value.length),1)])]),e("div",{class:"mt-4 flex justify-end"},[e("button",{onClick:I,class:"px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition flex items-center"},t[15]||(t[15]=[e("i",{class:"fas fa-upload mr-2"},null,-1),m(" Upload Files ",-1)]))])])])]),w(G,{name:"modal"},{default:z(()=>[h.value?(o(),r("div",ke,[e("div",he,[t[20]||(t[20]=e("h3",{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-100"},"Create New Folder",-1)),e("div",_e,[t[19]||(t[19]=e("label",{class:"block text-gray-700 dark:text-gray-300 mb-2"},"Folder Name",-1)),K(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>c.value=s),type:"text",class:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-gray-100 dark:border-gray-600"},null,512),[[L,c.value]])]),e("div",{class:"flex justify-end space-x-3"},[e("button",{onClick:_,class:"px-4 py-2 border rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 dark:border-gray-500"},"Cancel"),e("button",{onClick:U,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"},"Create")])])])):F("",!0)]),_:1})]),_:1})],64))}}),ze=Y(we,[["__scopeId","data-v-d78295f9"]]);export{ze as default};
