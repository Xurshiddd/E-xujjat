import{d as q,r as c,c as o,o as i,a as w,u as v,h as I,w as z,b as C,e as t,n as m,t as r,f as g,F as b,g as k,T as K,i as R,v as O,j as T}from"./app-D2z9-HQ2.js";import{_ as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-C0VHpA0E.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Cudy7j8t.js";import"./useForwardExpose-C-c2SGLE.js";import"./VisuallyHidden-CeRMK2CO.js";const L={class:"container mx-auto px-4 py-8 max-w-4xl"},Y={class:"bg-white rounded-xl shadow-md overflow-hidden p-6"},H={class:"mb-8"},J={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3"},Q=["onClick"],W={class:"mb-8"},Z={class:"flex flex-wrap gap-3"},ee=["onClick"],te={class:"mb-6"},se={class:"file-drop-area p-8 text-center"},le={class:"flex flex-col items-center justify-center"},ae={key:0,class:"mt-4"},oe={class:"space-y-2"},ie={class:"flex items-center"},ne={class:"font-medium text-gray-800"},re={class:"text-xs text-gray-500"},de=["onClick"],ue={class:"bg-gray-50 p-4 rounded-lg"},ce={class:"flex flex-wrap gap-4"},fe={class:"flex items-center"},me={class:"font-medium"},ge={class:"flex items-center"},pe={class:"font-medium"},xe={class:"flex items-center"},ve={class:"font-medium"},be={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ye={class:"bg-white rounded-lg p-6 w-full max-w-md"},he={class:"mb-4"},Fe=q({__name:"Create",props:{folders:{},categories:{}},setup($){let y=[],h=[];const N=$;y=N.folders||null,h=N.categories||null;const d=c(null),u=c(null),n=c([]),F=c(!1),f=c(""),p=c(""),S=c(!1);function x(l,e=!1){p.value=l,S.value=e,setTimeout(()=>p.value="",5e3)}function M(l){d.value=l}function j(l){u.value=l.id}function E(l){const e=l.target.files;if(e){const s=Array.from(e),a=s.filter(B=>B.size<=20971520);a.length<s.length&&alert("Fayl hajmi 20 MB dan oshmasligi kerak!"),n.value=a}}function P(l){n.value.splice(l,1)}function D(){F.value=!0,f.value=""}function _(){F.value=!1,f.value=""}function U(){if(f.value.trim()){const l=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");T.post("/folders",{name:f.value.trim()},{headers:{"X-CSRF-TOKEN":l}}).then(e=>{y.push(e.data.data),M(e.data.data),_(),x(e.data.data.message||"Papka muvaffaqiyatli yaratildi!",!1)}).catch(e=>{console.error("Error creating folder:",e),x(e.response?.data?.data?.message||"Failed to create folder. Please try again.",!0)}),_()}}function V(l){if(l===0)return"0 Bytes";const e=1024,s=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(l)/Math.log(e));return parseFloat((l/Math.pow(e,a)).toFixed(2))+" "+s[a]}function A(){if(!d.value){alert("Please select a folder");return}if(!u.value){alert("Please select a category");return}if(n.value.length===0){alert("Please select at least one file to upload");return}const l=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),e=new FormData;e.append("folder_id",d.value.id.toString()),e.append("category_id",u.value.toString()),n.value.forEach(s=>{e.append("files[]",s)}),T.post("/archives",e,{headers:{"Content-Type":"multipart/form-data","X-CSRF-TOKEN":l||""}}).then(s=>{x(s.data.data?.message||"Files uploaded successfully!",!1),d.value=null,u.value=null,n.value=[]}).catch(s=>{console.error("Error uploading files:",s),x(s.response?.data?.data?.message||"Failed to upload files. Please try again.",!0)}),d.value=null,u.value=null,n.value=[]}return(l,e)=>(i(),o(b,null,[w(v(I),{title:"Arxivlar yaratish"}),w(X,null,{default:z(()=>[p.value?(i(),o("div",{key:0,class:m(["fixed top-4 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded shadow-lg z-50 transition",S.value?"bg-red-500 text-white":"bg-green-500 text-white"])},r(p.value),3)):C("",!0),t("div",L,[t("div",Y,[e[17]||(e[17]=t("h1",{class:"text-3xl font-bold text-gray-800 mb-2"},"Upload Your Files",-1)),e[18]||(e[18]=t("p",{class:"text-gray-600 mb-6"},"Select folder and category for better organization",-1)),t("div",H,[e[2]||(e[2]=t("h2",{class:"text-xl font-semibold text-gray-700 mb-4 flex items-center"},[t("i",{class:"fas fa-folder-open mr-2 text-indigo-500"}),g(" Select Folder ")],-1)),t("div",J,[(i(!0),o(b,null,k(v(y),s=>(i(),o("div",{key:s.id,class:m(["folder-item cursor-pointer p-3 border rounded-lg flex items-center",{"border-indigo-500 bg-indigo-50":d.value?.id===s.id}]),onClick:a=>M(s)},[t("i",{class:m(`fas ${s.icon} mr-3 text-xl ${s.color}`)},null,2),t("span",null,r(s.name),1)],10,Q))),128))]),t("div",{class:"mt-4"},[t("button",{onClick:D,class:"text-indigo-600 hover:text-indigo-800 flex items-center"},e[1]||(e[1]=[t("i",{class:"fas fa-plus-circle mr-2"},null,-1),g(" Create New Folder ",-1)]))])]),t("div",W,[e[3]||(e[3]=t("h2",{class:"text-xl font-semibold text-gray-700 mb-4 flex items-center"},[t("i",{class:"fas fa-tags mr-2 text-indigo-500"}),g(" Select Category ")],-1)),t("div",Z,[(i(!0),o(b,null,k(v(h),s=>(i(),o("div",{key:s.id,class:m(["category-pill cursor-pointer px-4 py-2 bg-gray-100 rounded-full flex items-center",{"bg-indigo-100 border border-indigo-300":u.value===s.id}]),onClick:a=>j(s)},[t("i",{class:m(`fas ${s.icon} mr-2 ${s.color}`)},null,2),t("span",null,r(s.name),1)],10,ee))),128))])]),t("div",te,[e[11]||(e[11]=t("h2",{class:"text-xl font-semibold text-gray-700 mb-4 flex items-center"},[t("i",{class:"fas fa-cloud-upload-alt mr-2 text-indigo-500"}),g(" Upload Files ")],-1)),t("div",se,[t("div",le,[e[4]||(e[4]=t("i",{class:"fas fa-cloud-upload-alt text-5xl text-indigo-400 mb-4"},null,-1)),e[5]||(e[5]=t("p",{class:"text-gray-600 mb-2"},"Drag & drop your files here",-1)),e[6]||(e[6]=t("p",{class:"text-gray-500 text-sm mb-4"},"or",-1)),e[7]||(e[7]=t("label",{for:"fileInput",class:"cursor-pointer px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition"}," Browse Files ",-1)),t("input",{type:"file",id:"fileInput",class:"hidden",multiple:"",onChange:E},null,32)])]),n.value.length>0?(i(),o("div",ae,[e[10]||(e[10]=t("h3",{class:"font-medium text-gray-700 mb-2"},"Selected Files:",-1)),t("div",oe,[(i(!0),o(b,null,k(n.value,(s,a)=>(i(),o("div",{key:s.name+a,class:"flex items-center justify-between p-2 bg-gray-50 rounded"},[t("div",ie,[e[8]||(e[8]=t("i",{class:"fas fa-file text-indigo-500 mr-3"},null,-1)),t("div",null,[t("div",ne,r(s.name),1),t("div",re,r(V(s.size)),1)])]),t("button",{onClick:B=>P(a),class:"text-red-500 hover:text-red-700"},e[9]||(e[9]=[t("i",{class:"fas fa-times"},null,-1)]),8,de)]))),128))])])):C("",!0)]),t("div",ue,[e[16]||(e[16]=t("h3",{class:"font-medium text-gray-700 mb-2"},"Upload Summary:",-1)),t("div",ce,[t("div",fe,[e[12]||(e[12]=t("span",{class:"text-gray-600 mr-2"},"Folder:",-1)),t("span",me,r(d.value?.name||"Not selected"),1)]),t("div",ge,[e[13]||(e[13]=t("span",{class:"text-gray-600 mr-2"},"Category:",-1)),t("span",pe,r(v(h).find(s=>s.id===u.value)?.name||"Not selected"),1)]),t("div",xe,[e[14]||(e[14]=t("span",{class:"text-gray-600 mr-2"},"Files:",-1)),t("span",ve,r(n.value.length),1)])]),t("div",{class:"mt-4 flex justify-end"},[t("button",{onClick:A,class:"px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition flex items-center"},e[15]||(e[15]=[t("i",{class:"fas fa-upload mr-2"},null,-1),g(" Upload Files ",-1)]))])])])]),w(K,{name:"modal"},{default:z(()=>[F.value?(i(),o("div",be,[t("div",ye,[e[20]||(e[20]=t("h3",{class:"text-xl font-semibold mb-4"},"Create New Folder",-1)),t("div",he,[e[19]||(e[19]=t("label",{class:"block text-gray-700 mb-2"},"Folder Name",-1)),R(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>f.value=s),type:"text",class:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[O,f.value]])]),t("div",{class:"flex justify-end space-x-3"},[t("button",{onClick:_,class:"px-4 py-2 border rounded-md hover:bg-gray-50"},"Cancel"),t("button",{onClick:U,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"},"Create")])])])):C("",!0)]),_:1})]),_:1})],64))}}),Me=G(Fe,[["__scopeId","data-v-7e4bb445"]]);export{Me as default};
