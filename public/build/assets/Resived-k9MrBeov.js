import{d as w,r as c,c as l,o as r,a as p,u as y,h as x,w as k,e,b,F as h,g as C,t as a,i as B,v as M,j}from"./app-DjcPY7n4.js";import{_ as N}from"./AppLayout.vue_vue_type_script_setup_true_lang-BkHQ-Feq.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Dv1fB-vY.js";import"./useForwardExpose-FTsRkq1R.js";import"./VisuallyHidden-tR08VyQk.js";const P={class:"p-6"},R={class:"w-full border border-gray-300 rounded-lg"},S={class:"p-2 border"},T={class:"p-2 border"},V={class:"p-2 border"},$={class:"p-2 border"},L={class:"p-2 border"},U={class:"p-2 border"},q=["onClick"],z={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},A={class:"bg-white p-6 rounded shadow-lg w-96"},D={key:0,class:"text-red-500 mb-2"},E={class:"flex justify-end space-x-2"},H=w({__name:"Resived",props:{shares:{}},setup(m){const _=m,d=c(!1),u=c(null),n=c(""),i=c("");function f(o){o.has_password?(u.value=o,n.value="",i.value="",d.value=!0):window.location.href=o.url}async function v(){try{const o=await j.get(`/s/document/${u.value.token}`,{params:{password:n.value},responseType:"blob"}),t=window.URL.createObjectURL(new Blob([o.data])),s=document.createElement("a");s.href=t,s.setAttribute("download",o.headers["content-disposition"]?.split("filename=")[1]||"file"),document.body.appendChild(s),s.click(),d.value=!1}catch(o){i.value=o.response?.data?.message||"Xatolik yuz berdi"}}return(o,t)=>(r(),l(h,null,[p(y(x),{title:"Received Shares"}),p(N,null,{default:k(()=>[e("div",P,[t[3]||(t[3]=e("h1",{class:"text-2xl font-bold mb-4"},"Menga yuborilganlar",-1)),e("table",R,[t[2]||(t[2]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"p-2 border"},"#"),e("th",{class:"p-2 border"},"Kimdan"),e("th",{class:"p-2 border"},"Type"),e("th",{class:"p-2 border"},"Nomi"),e("th",{class:"p-2 border"},"Muddati"),e("th",{class:"p-2 border"},"Amal")])],-1)),e("tbody",null,[(r(!0),l(h,null,C(_.shares,(s,g)=>(r(),l("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",S,a(g+1),1),e("td",T,a(s.sender_name),1),e("td",V,a(s.type),1),e("td",$,a(s.shareable_name),1),e("td",L,a(s.expires_at??"Cheksiz"),1),e("td",U,[e("button",{class:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700",onClick:F=>f(s)}," Yuklab olish ",8,q)])]))),128))])])]),d.value?(r(),l("div",z,[e("div",A,[t[4]||(t[4]=e("h2",{class:"text-lg font-bold mb-4"},"Parolni kiriting",-1)),B(e("input",{type:"password","onUpdate:modelValue":t[0]||(t[0]=s=>n.value=s),placeholder:"Parol",class:"border w-full p-2 rounded mb-3"},null,512),[[M,n.value]]),i.value?(r(),l("p",D,a(i.value),1)):b("",!0),e("div",E,[e("button",{class:"px-3 py-1 bg-gray-300 rounded",onClick:t[1]||(t[1]=s=>d.value=!1)},"Bekor qilish"),e("button",{class:"px-3 py-1 bg-green-600 text-white rounded",onClick:v},"Tasdiqlash")])])])):b("",!0)]),_:1})],64))}});export{H as default};
