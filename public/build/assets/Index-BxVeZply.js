import{d as $,m as X,r as d,c as l,o as a,a as h,u as Y,h as A,w,b as p,e,t as r,F as b,g as _,f as n,n as H,T as N,i as B,v as E,j as M}from"./app-t1hFasqC.js";import{_ as K}from"./AppLayout.vue_vue_type_script_setup_true_lang-DRGrYa5k.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-WQcd9ENm.js";import"./useForwardExpose-BiSBS3b4.js";import"./VisuallyHidden-DLgn2Ija.js";const R={key:0,class:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded shadow-lg z-50 transition"},U={key:1,class:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded shadow-lg z-50 transition"},G={class:"mb-4 flex space-x-2 text-sm text-gray-500"},J=["href"],Q={key:0},W={key:2,class:"space-y-4"},Z={class:"container mx-auto px-4 py-8 max-w-6xl"},ee={class:"bg-white rounded-xl shadow-md overflow-hidden"},te={class:"p-6"},se={class:"relative overflow-x-auto responsive-table"},oe={class:"w-full text-sm text-left text-gray-500"},le={id:"folderTable"},ae={class:"px-6 py-4 flex items-center"},ne={class:"px-6 py-4"},ie={class:"px-6 py-4"},re={class:"px-6 py-4"},de={class:"flex space-x-2"},ce={class:"text-blue-500 hover:text-blue-700",title:"Open"},ue=["href"],fe=["onClick"],pe=["onClick"],xe={class:"flex justify-between items-center mt-4 text-sm text-gray-600"},me={id:"showingStart"},ge={id:"showingEnd"},he={id:"totalItems"},be={class:"flex justify-end space-x-2"},ve=["href","innerHTML"],ye={key:3,class:"text-gray-500"},ke={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},we={class:"bg-white rounded-lg shadow-lg p-6 max-w-sm w-full"},_e={class:"mb-4"},Me={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Fe={class:"bg-white rounded-lg shadow-lg p-6 max-w-sm w-full"},Te={class:"mb-4"},Ce=$({__name:"Index",props:{folders:{}},setup(S){const v=[{title:"Papkalar",href:"/folders"}];function P(s){if(s===0)return"0 B";const t=["B","KB","MB","GB","TB"],o=Math.floor(Math.log(s)/Math.log(1024));return(s/Math.pow(1024,o)).toFixed(2)+" "+t[o]}const i=S;X().props.auth.user;const y=d(!1),u=d(""),x=d(""),m=d(""),k=d(!1),c=d(""),f=d(null);function j(){y.value=!0}function F(){y.value=!1,u.value=""}function T(s){x.value=s,setTimeout(()=>x.value="",5e3)}function C(s){m.value=s,setTimeout(()=>m.value="",5e3)}function I(){M.post("/folders",{name:u.value},{maxContentLength:1/0,maxBodyLength:1/0}).then(s=>{i.folders.data.push(s.data.data),u.value="",F(),T(s.data.message||"Papka muvaffaqiyatli yaratildi!")}).catch(s=>{C(s.response?.data?.message||"Xatolik: papka yaratilmagan!"),console.error("Error creating folder:",s)})}function D(s){M.delete(`/folders/${s}`,{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}}).then(t=>{window.location.reload()}).catch(t=>{console.error("Papka o'chirishda xato:",t),alert("Papka o'chirishda xato yuz berdi.")})}function L(s){confirm("Papkani o‘chirishga ishonchingiz komilmi?")&&D(s)}function V(s){c.value=s.name,f.value=s.id,k.value=!0}function z(){k.value=!1,c.value="",f.value=null}function q(){f.value&&M.put(`/folders/${f.value}`,{name:c.value}).then(s=>{const t=i.folders.data.findIndex(o=>o.id===f.value);t!==-1&&(i.folders.data[t].name=c.value),z(),T(s.data.message||"Papka nomi o‘zgartirildi!")}).catch(s=>{C(s.response?.data?.message||"Xatolik: papka nomi o‘zgartirilmadi!"),console.error("Error updating folder:",s)})}return(s,t)=>(a(),l(b,null,[h(Y(A),{title:"Folders"}),h(K,{breadcrumbs:v},{default:w(()=>[x.value?(a(),l("div",R,r(x.value),1)):p("",!0),m.value?(a(),l("div",U,r(m.value),1)):p("",!0),e("nav",G,[(a(),l(b,null,_(v,(o,g)=>e("span",{key:g},[e("a",{href:o.href,class:"hover:underline"},r(o.title),9,J),g<v.length-1?(a(),l("span",Q,"/")):p("",!0)])),64))]),e("div",null,[e("button",{onClick:j,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center transition-colors"},t[2]||(t[2]=[e("i",{class:"fas fa-plus mr-2"},null,-1),n(" New Folder ",-1)]))]),i.folders.data.length>0?(a(),l("div",W,[e("div",Z,[e("div",ee,[e("div",te,[t[14]||(t[14]=e("div",{class:"flex justify-between items-center mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-800"},"Folder Manager")],-1)),e("div",se,[e("table",oe,[t[9]||(t[9]=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-100"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 sortable",onclick:"sortTable(0)"},[e("div",{class:"flex items-center"},[n(" Name "),e("i",{class:"fas fa-sort ml-2 text-gray-400"})])]),e("th",{scope:"col",class:"px-6 py-3 sortable",onclick:"sortTable(1)"},[e("div",{class:"flex items-center"},[n(" Date Modified "),e("i",{class:"fas fa-sort ml-2 text-gray-400"})])]),e("th",{scope:"col",class:"px-6 py-3 sortable",onclick:"sortTable(2)"},[e("div",{class:"flex items-center"},[n(" Type "),e("i",{class:"fas fa-sort ml-2 text-gray-400"})])]),e("th",{scope:"col",class:"px-6 py-3 sortable",onclick:"sortTable(3)"},[e("div",{class:"flex items-center"},[n(" Size "),e("i",{class:"fas fa-sort ml-2 text-gray-400"})])]),e("th",{scope:"col",class:"px-6 py-3"}," Actions ")])],-1)),e("tbody",le,[(a(!0),l(b,null,_(i.folders.data,o=>(a(),l("tr",{key:o.id,class:"folder-row hover:bg-gray-50 transition-colors"},[e("td",ae,[t[3]||(t[3]=e("i",{class:"fas fa-folder folder-icon mr-2 text-yellow-500"},null,-1)),n(" "+r(o.name),1)]),e("td",ne,r(new Date(o.created_at).toLocaleDateString()),1),t[8]||(t[8]=e("td",{class:"px-6 py-4"},"Folder",-1)),e("td",ie,r(P(o.size)),1),e("td",re,[e("div",de,[e("button",ce,[e("a",{href:s.route("folders.show",o.id)},t[4]||(t[4]=[e("i",{class:"fas fa-folder-open"},null,-1)]),8,ue)]),t[7]||(t[7]=e("button",{class:"text-green-500 hover:text-green-700",title:"Share"},[e("i",{class:"fas fa-share-alt"})],-1)),e("button",{class:"text-red-500 hover:text-red-700",onClick:g=>L(o.id),title:"Delete"},t[5]||(t[5]=[e("i",{class:"fas fa-trash-alt"},null,-1)]),8,fe),e("button",{class:"text-yellow-500 hover:text-yellow-700",onClick:g=>V(o),title:"Edit"},t[6]||(t[6]=[e("i",{class:"fas fa-edit"},null,-1)]),8,pe)])])]))),128))])])]),e("div",xe,[e("div",null,[t[10]||(t[10]=n("Showing ",-1)),e("span",me,r(i.folders.from),1),t[11]||(t[11]=n(" to ",-1)),e("span",ge,r(i.folders.to),1),t[12]||(t[12]=n(" of ",-1)),e("span",he,r(i.folders.total),1),t[13]||(t[13]=n(" folders",-1))]),e("div",be,[(a(!0),l(b,null,_(i.folders.links,o=>(a(),l("div",{class:"flex space-x-2",key:o.label},[e("a",{href:o.url||"#",class:H(["px-3 py-1 border rounded-md",o.active?"bg-blue-500 text-white":"bg-white text-blue-500 hover:bg-gray-100",o.url?"":"pointer-events-none opacity-50"]),innerHTML:o.label},null,10,ve)]))),128))])])])])])])):(a(),l("p",ye,"No folders found.")),h(N,{name:"modal"},{default:w(()=>[y.value?(a(),l("div",ke,[e("div",we,[t[16]||(t[16]=e("h2",{class:"text-lg font-semibold mb-4"},"Yangi papka yaratish",-1)),e("div",_e,[t[15]||(t[15]=e("label",{for:"folderName",class:"block text-sm font-medium text-gray-700 mb-2"},"Papka nomi",-1)),B(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>u.value=o),type:"text",id:"folderName",class:"border border-gray-300 rounded-lg px-4 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter folder name"},null,512),[[E,u.value]])]),e("div",{class:"flex justify-end space-x-2"},[e("button",{onClick:F,class:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors"}," Bekor qilish "),e("button",{onClick:I,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"}," Saqlash ")])])])):p("",!0)]),_:1}),h(N,{name:"modal"},{default:w(()=>[k.value?(a(),l("div",Me,[e("div",Fe,[t[18]||(t[18]=e("h2",{class:"text-lg font-semibold mb-4"},"Papka nomini o‘zgartirish",-1)),e("div",Te,[t[17]||(t[17]=e("label",{for:"editFolderName",class:"block text-sm font-medium text-gray-700 mb-2"},"Yangi papka nomi",-1)),B(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>c.value=o),type:"text",id:"editFolderName",class:"border border-gray-300 rounded-lg px-4 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter new folder name"},null,512),[[E,c.value]])]),e("div",{class:"flex justify-end space-x-2"},[e("button",{onClick:z,class:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors"}," Bekor qilish "),e("button",{onClick:q,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"}," Yangilash ")])])])):p("",!0)]),_:1})]),_:1})],64))}}),je=O(Ce,[["__scopeId","data-v-4840c1d6"]]);export{je as default};
