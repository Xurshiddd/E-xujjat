import{d as W,k as Z,r as s,c as r,o,a as u,u as D,h as ee,w as F,b as n,e,t as p,f as S,F as q,g as ae,T as V,i as v,v as k,j as g}from"./app-gy54rHtg.js";import{_ as te}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bt8l3c-R.js";import{s as le}from"./default-BclsSTQ7.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Db-UikCm.js";import"./useForwardExpose-86WOPWNI.js";import"./VisuallyHidden-C-pa06ho.js";const se={key:0,class:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded shadow-lg dark:bg-green-600"},re={key:1,class:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded shadow-lg dark:bg-red-600"},oe={key:2,class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},de={class:"w-full text-sm text-left text-gray-500 dark:text-gray-300"},ne={class:"px-6 py-4 flex items-center"},ie={class:"px-6 py-4"},ue={class:"px-6 py-4"},pe={class:"px-6 py-4 flex space-x-2"},ge=["href"],ce=["onClick"],xe=["onClick"],fe=["onClick"],ye={key:3,class:"text-gray-500 dark:text-gray-400"},be={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},me={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-sm w-full"},ve={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},ke={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-sm w-full"},he={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},we={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-md w-full"},_e={class:"mb-4 dark:text-gray-200"},Ce={class:"flex space-x-2 mb-3"},Me={key:0,class:"mb-3"},Fe={class:"flex justify-end space-x-2"},Pe=W({__name:"Index",props:{folders:{}},setup(I){const L=[{title:"Papkalar",href:"/folders"}];function A(t){if(t===0)return"0 B";const a=["B","KB","MB","GB","TB"],l=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,l)).toFixed(2)+" "+a[l]}const c=I;Z().props.auth.user;const h=s(""),w=s("");function _(t){h.value=t,setTimeout(()=>h.value="",5e3)}function x(t){w.value=t,setTimeout(()=>w.value="",5e3)}const U=s(!1),C=s("");function R(){U.value=!0}function N(){U.value=!1,C.value=""}function X(){g.post("/folders",{name:C.value}).then(t=>{c.folders.data.push(t.data.data),N(),_(t.data.message||"Papka yaratildi!")}).catch(t=>x(t.response?.data?.message||"Xatolik: papka yaratilmagan!"))}function G(t){g.delete(`/folders/${t}`,{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}}).then(()=>window.location.reload()).catch(()=>alert("Papka o'chirishda xato yuz berdi."))}function K(t){confirm("Papkani o‘chirishga ishonchingiz komilmi?")&&G(t)}const z=s(!1),i=s(""),f=s(null);function Y(t){i.value=t.name,f.value=t.id,z.value=!0}function P(){z.value=!1,i.value="",f.value=null}function J(){f.value&&g.put(`/folders/${f.value}`,{name:i.value}).then(t=>{const a=c.folders.data.findIndex(l=>l.id===f.value);a!==-1&&(c.folders.data[a].name=i.value),P(),_(t.data.message||"Papka nomi o‘zgartirildi!")}).catch(t=>x(t.response?.data?.message||"Xatolik: papka nomi o‘zgartirilmadi!"))}const B=s(!1),y=s(null),T=s(""),b=s(""),m=s(""),d=s(""),$=s([]),M=s([]);function O(t){y.value=t.id,T.value=t.name,B.value=!0,d.value="",b.value="",m.value="",M.value=[],g.get("/users").then(a=>{$.value=a.data.data}).catch(()=>x("Userlarni olishda xato!"))}function j(){B.value=!1}function H(){y.value&&g.post(`/shareble/${y.value}/share`,{type:"folder",expires_at:b.value||null,password:m.value||null}).then(t=>{d.value=t.data.url,_("Share link yaratildi!")}).catch(()=>x("Share link yaratishda xato!"))}function Q(){y.value&&g.post(`/shareble/${y.value}/share/send`,{password:m.value,expires_at:b.value,type:"folder",url:d.value,users:M.value}).then(t=>{_(t.data.message||"Link yuborildi!"),j()}).catch(()=>x("Userlarga yuborishda xato!"))}return(t,a)=>(o(),r(q,null,[u(D(ee),{title:"Folders"}),u(te,{breadcrumbs:L},{default:F(()=>[h.value?(o(),r("div",se,p(h.value),1)):n("",!0),w.value?(o(),r("div",re,p(w.value),1)):n("",!0),e("div",{class:"mb-4"},[e("button",{onClick:R,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center"},a[6]||(a[6]=[e("i",{class:"fas fa-plus mr-2"},null,-1),S(" New Folder ",-1)]))]),c.folders.data.length?(o(),r("div",oe,[e("table",de,[a[13]||(a[13]=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-200"},[e("tr",null,[e("th",{class:"px-6 py-3"},"Name"),e("th",{class:"px-6 py-3"},"Date Modified"),e("th",{class:"px-6 py-3"},"Type"),e("th",{class:"px-6 py-3"},"Size"),e("th",{class:"px-6 py-3"},"Actions")])],-1)),e("tbody",null,[(o(!0),r(q,null,ae(c.folders.data,l=>(o(),r("tr",{key:l.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",ne,[a[7]||(a[7]=e("i",{class:"fas fa-folder text-yellow-500 mr-2"},null,-1)),S(p(l.name),1)]),e("td",ie,p(new Date(l.created_at).toLocaleDateString()),1),a[12]||(a[12]=e("td",{class:"px-6 py-4"},"Folder",-1)),e("td",ue,p(A(l.size)),1),e("td",pe,[e("a",{href:t.route("folders.show",l.id),class:"text-blue-500 hover:text-blue-700"},a[8]||(a[8]=[e("i",{class:"fas fa-folder-open"},null,-1)]),8,ge),e("button",{onClick:E=>O(l),class:"text-green-500 hover:text-green-700"},a[9]||(a[9]=[e("i",{class:"fas fa-share-alt"},null,-1)]),8,ce),e("button",{onClick:E=>K(l.id),class:"text-red-500 hover:text-red-700"},a[10]||(a[10]=[e("i",{class:"fas fa-trash-alt"},null,-1)]),8,xe),e("button",{onClick:E=>Y(l),class:"text-yellow-500 hover:text-yellow-700"},a[11]||(a[11]=[e("i",{class:"fas fa-edit"},null,-1)]),8,fe)])]))),128))])])])):(o(),r("p",ye,"No folders found.")),u(V,{name:"modal"},{default:F(()=>[U.value?(o(),r("div",be,[e("div",me,[a[14]||(a[14]=e("h2",{class:"text-lg font-semibold mb-4 dark:text-gray-100"},"Yangi papka yaratish",-1)),v(e("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>C.value=l),type:"text",placeholder:"Enter folder name",class:"border rounded px-3 py-2 w-full mb-4 bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100"},null,512),[[k,C.value]]),e("div",{class:"flex justify-end space-x-2"},[e("button",{onClick:N,class:"px-4 py-2 bg-gray-200 rounded dark:bg-gray-600 dark:text-gray-200"}," Bekor qilish "),e("button",{onClick:X,class:"px-4 py-2 bg-blue-500 text-white rounded"}," Saqlash ")])])])):n("",!0)]),_:1}),u(V,{name:"modal"},{default:F(()=>[z.value?(o(),r("div",ve,[e("div",ke,[a[15]||(a[15]=e("h2",{class:"text-lg font-semibold mb-4 dark:text-gray-100"},"Papka nomini o‘zgartirish",-1)),v(e("input",{"onUpdate:modelValue":a[1]||(a[1]=l=>i.value=l),type:"text",placeholder:"Enter new folder name",class:"border rounded px-3 py-2 w-full mb-4 bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100"},null,512),[[k,i.value]]),e("div",{class:"flex justify-end space-x-2"},[e("button",{onClick:P,class:"px-4 py-2 bg-gray-200 rounded dark:bg-gray-600 dark:text-gray-200"}," Bekor qilish "),e("button",{onClick:J,class:"px-4 py-2 bg-blue-500 text-white rounded"}," Yangilash ")])])])):n("",!0)]),_:1}),u(V,{name:"modal"},{default:F(()=>[B.value?(o(),r("div",he,[e("div",we,[a[18]||(a[18]=e("h2",{class:"text-lg font-semibold mb-4 dark:text-gray-100"},"Papkani ulash",-1)),e("p",_e,[a[16]||(a[16]=e("strong",null,"Papka nomi:",-1)),S(" "+p(T.value),1)]),v(e("input",{type:"datetime-local","onUpdate:modelValue":a[2]||(a[2]=l=>b.value=l),class:"border rounded px-3 py-2 w-full mb-3 bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100"},null,512),[[k,b.value]]),v(e("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=l=>m.value=l),placeholder:"Parol (ixtiyoriy)",class:"border rounded px-3 py-2 w-full mb-3 bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100"},null,512),[[k,m.value]]),e("div",Ce,[e("button",{onClick:H,class:"px-4 py-2 bg-blue-500 text-white rounded"}," Generate URL "),d.value?v((o(),r("input",{key:0,"onUpdate:modelValue":a[4]||(a[4]=l=>d.value=l),readonly:"",class:"border px-3 py-2 rounded w-full bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100"},null,512)),[[k,d.value]]):n("",!0)]),d.value?(o(),r("div",Me,[a[17]||(a[17]=e("label",{class:"block text-sm mb-1 dark:text-gray-200"},"Select Users",-1)),u(D(le),{modelValue:M.value,"onUpdate:modelValue":a[5]||(a[5]=l=>M.value=l),options:$.value,mode:"tags",label:"name","track-by":"id","value-prop":"id",placeholder:"Foydalanuvchilarni tanlang"},null,8,["modelValue","options"])])):n("",!0),e("div",Fe,[e("button",{onClick:j,class:"px-4 py-2 bg-gray-200 rounded dark:bg-gray-600 dark:text-gray-200"}," Bekor qilish "),d.value?(o(),r("button",{key:0,onClick:Q,class:"px-4 py-2 bg-green-500 text-white rounded dark:bg-green-600"}," Jo‘natish ")):n("",!0)])])])):n("",!0)]),_:1})]),_:1})],64))}});export{Pe as default};
