import{d as _,r as c,c as o,o as d,a as u,u as v,h as w,w as C,e,b as g,F as p,g as D,t as s,n as B,i as M,v as j,j as z}from"./app-DqSDLhhy.js";import{_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-B0Huz97-.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C1_kKuyr.js";import"./useForwardExpose-BJPNYSn3.js";import"./VisuallyHidden-CdVqA9YE.js";const N={class:"p-6"},P={class:"w-full border border-gray-300 dark:border-gray-700 rounded-lg"},R={class:"p-2 border dark:border-gray-700"},S={class:"p-2 border dark:border-gray-700"},T={class:"p-2 border dark:border-gray-700"},U={class:"p-2 border dark:border-gray-700"},V={class:"p-2 border dark:border-gray-700"},$=["onClick"],q={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},A={class:"bg-white dark:bg-gray-800 p-6 rounded shadow-lg w-96"},E={key:0,class:"text-red-500 mb-2"},F={class:"flex justify-end space-x-2"},H=_({__name:"Resived",props:{shares:{}},setup(y){const k=y,l=c(!1),b=c(null),n=c(""),i=c("");function m(a){a.has_password?(b.value=a,n.value="",i.value="",l.value=!0):window.location.href=a.url}async function h(){try{const a=await z.get(`/s/document/${b.value.token}`,{params:{password:n.value},responseType:"blob"}),t=window.URL.createObjectURL(new Blob([a.data])),r=document.createElement("a");r.href=t,r.setAttribute("download",a.headers["content-disposition"]?.split("filename=")[1]||"file"),document.body.appendChild(r),r.click(),l.value=!1}catch(a){i.value=a.response?.data?.message||"Xatolik yuz berdi"}}function f(a){return a?new Date(a).toLocaleString("uz-UZ",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Cheksiz"}return(a,t)=>(d(),o(p,null,[u(v(w),{title:"Received Shares"}),u(L,null,{default:C(()=>[e("div",N,[t[3]||(t[3]=e("h1",{class:"text-2xl font-bold mb-4 text-gray-800 dark:text-gray-200"}," Menga yuborilganlar ",-1)),e("table",P,[t[2]||(t[2]=e("thead",{class:"bg-gray-100 dark:bg-gray-800"},[e("tr",{class:"text-gray-700 dark:text-gray-200"},[e("th",{class:"p-2 border dark:border-gray-700"},"#"),e("th",{class:"p-2 border dark:border-gray-700"},"Kimdan"),e("th",{class:"p-2 border dark:border-gray-700"},"Type"),e("th",{class:"p-2 border dark:border-gray-700"},"Nomi"),e("th",{class:"p-2 border dark:border-gray-700"},"Muddati"),e("th",{class:"p-2 border dark:border-gray-700"},"Amal")])],-1)),e("tbody",null,[(d(!0),o(p,null,D(k.shares,(r,x)=>(d(),o("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-800 dark:text-gray-100"},[e("td",R,s(x+1),1),e("td",S,s(r.sender_name),1),e("td",T,s(r.type),1),e("td",U,s(r.shareable_name),1),e("td",{class:B(["p-2 border dark:border-gray-700",{"bg-red-500 text-white":r.expires_at&&new Date(r.expires_at)<new Date}])},s(f(r.expires_at)),3),e("td",V,[e("button",{class:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700",onClick:K=>m(r)}," Yuklab olish ",8,$)])]))),128))])])]),l.value?(d(),o("div",q,[e("div",A,[t[4]||(t[4]=e("h2",{class:"text-lg font-bold mb-4 text-gray-800 dark:text-gray-200"}," Parolni kiriting ",-1)),M(e("input",{type:"password","onUpdate:modelValue":t[0]||(t[0]=r=>n.value=r),placeholder:"Parol",class:"border w-full p-2 rounded mb-3 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100"},null,512),[[j,n.value]]),i.value?(d(),o("p",E,s(i.value),1)):g("",!0),e("div",F,[e("button",{class:"px-3 py-1 bg-gray-300 dark:bg-gray-600 dark:text-gray-200 rounded",onClick:t[1]||(t[1]=r=>l.value=!1)}," Bekor qilish "),e("button",{class:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700",onClick:h}," Tasdiqlash ")])])])):g("",!0)]),_:1})],64))}});export{H as default};
