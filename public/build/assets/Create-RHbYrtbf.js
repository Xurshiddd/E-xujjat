import{d as A,r as c,c as o,o as i,a as F,u as v,h as q,w as z,b as C,e,n as m,t as r,f as p,F as y,g as k,T as G,i as K,v as L,j as $}from"./app-CvWSRHXZ.js";import{_ as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-ukFRSCtx.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Cy0htrRV.js";import"./useForwardExpose-CtqrSHKd.js";import"./VisuallyHidden-Cvv-R-Bg.js";const H={class:"container mx-auto px-4 py-8 max-w-4xl"},J={class:"bg-white rounded-xl shadow-md overflow-hidden p-6"},O={class:"mb-8"},Q={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3"},W=["onClick"],X={class:"mb-8"},Z={class:"flex flex-wrap gap-3"},ee=["onClick"],te={class:"mb-6"},se={class:"file-drop-area p-8 text-center"},le={class:"flex flex-col items-center justify-center"},ae={key:0,class:"mt-4"},oe={class:"space-y-2"},ie={class:"flex items-center"},ne={class:"font-medium text-gray-800"},re={class:"text-xs text-gray-500"},de=["onClick"],ue={class:"bg-gray-50 p-4 rounded-lg"},ce={class:"flex flex-wrap gap-4"},fe={class:"flex items-center"},me={class:"font-medium"},pe={class:"flex items-center"},ge={class:"font-medium"},xe={class:"flex items-center"},ve={class:"font-medium"},ye={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},be={class:"bg-white rounded-lg p-6 w-full max-w-md"},he={class:"mb-4"},_e=A({__name:"Create",props:{folders:{},categories:{}},setup(j){let b=[],h=[];const N=j;b=N.folders||null,h=N.categories||null;const d=c(null),u=c(null),n=c([]),_=c(!1),f=c(""),g=c(""),M=c(!1);function x(s,t=!1){g.value=s,M.value=t,setTimeout(()=>g.value="",5e3)}function B(s){d.value=s}function P(s){u.value=s.id}function T(s){const t=s.target.files;if(t){const l=Array.from(t),a=l.filter(S=>S.size<=50971520);a.length<l.length&&alert("Fayl hajmi 20 MB dan oshmasligi kerak!"),n.value=a}}function D(s){n.value.splice(s,1)}function E(){_.value=!0,f.value=""}function w(){_.value=!1,f.value=""}function U(){f.value.trim()&&($.post("/folders",{name:f.value.trim()}).then(s=>{b.push(s.data.data),B(s.data.data),w(),x(s.data.data.message||"Papka muvaffaqiyatli yaratildi!",!1)}).catch(s=>{console.error("Error creating folder:",s),x(s.response?.data?.data?.message||"Failed to create folder. Please try again.",!0)}),w())}function V(s){if(s===0)return"0 Bytes";const t=1024,l=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,a)).toFixed(2))+" "+l[a]}function I(){if(!d.value){alert("Please select a folder");return}if(!u.value){alert("Please select a category");return}if(n.value.length===0){alert("Please select at least one file to upload");return}const s=new FormData;s.append("folder_id",d.value.id.toString()),s.append("category_id",u.value.toString()),n.value.forEach(t=>{s.append("files[]",t)}),$.post("/archives",s,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{x(t.data.data?.message||"Files uploaded successfully!",!1),d.value=null,u.value=null,n.value=[]}).catch(t=>{console.error("Error uploading files:",t),x(t.response?.data?.data?.message||"Failed to upload files. Please try again.",!0)}),d.value=null,u.value=null,n.value=[]}return(s,t)=>(i(),o(y,null,[F(v(q),{title:"Arxivlar yaratish"}),F(R,null,{default:z(()=>[g.value?(i(),o("div",{key:0,class:m(["fixed top-4 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded shadow-lg z-50 transition",M.value?"bg-red-500 text-white":"bg-green-500 text-white"])},r(g.value),3)):C("",!0),e("div",H,[e("div",J,[t[17]||(t[17]=e("h1",{class:"text-3xl font-bold text-gray-800 mb-2"},"Upload Your Files",-1)),t[18]||(t[18]=e("p",{class:"text-gray-600 mb-6"},"Select folder and category for better organization",-1)),e("div",O,[t[2]||(t[2]=e("h2",{class:"text-xl font-semibold text-gray-700 mb-4 flex items-center"},[e("i",{class:"fas fa-folder-open mr-2 text-indigo-500"}),p(" Select Folder ")],-1)),e("div",Q,[(i(!0),o(y,null,k(v(b),l=>(i(),o("div",{key:l.id,class:m(["folder-item cursor-pointer p-3 border rounded-lg flex items-center",{"border-indigo-500 bg-indigo-50":d.value?.id===l.id}]),onClick:a=>B(l)},[e("i",{class:m(`fas ${l.icon} mr-3 text-xl ${l.color}`)},null,2),e("span",null,r(l.name),1)],10,W))),128))]),e("div",{class:"mt-4"},[e("button",{onClick:E,class:"text-indigo-600 hover:text-indigo-800 flex items-center"},t[1]||(t[1]=[e("i",{class:"fas fa-plus-circle mr-2"},null,-1),p(" Create New Folder ",-1)]))])]),e("div",X,[t[3]||(t[3]=e("h2",{class:"text-xl font-semibold text-gray-700 mb-4 flex items-center"},[e("i",{class:"fas fa-tags mr-2 text-indigo-500"}),p(" Select Category ")],-1)),e("div",Z,[(i(!0),o(y,null,k(v(h),l=>(i(),o("div",{key:l.id,class:m(["category-pill cursor-pointer px-4 py-2 bg-gray-100 rounded-full flex items-center",{"bg-indigo-100 border border-indigo-300":u.value===l.id}]),onClick:a=>P(l)},[e("i",{class:m(`fas ${l.icon} mr-2 ${l.color}`)},null,2),e("span",null,r(l.name),1)],10,ee))),128))])]),e("div",te,[t[11]||(t[11]=e("h2",{class:"text-xl font-semibold text-gray-700 mb-4 flex items-center"},[e("i",{class:"fas fa-cloud-upload-alt mr-2 text-indigo-500"}),p(" Upload Files ")],-1)),e("div",se,[e("div",le,[t[4]||(t[4]=e("i",{class:"fas fa-cloud-upload-alt text-5xl text-indigo-400 mb-4"},null,-1)),t[5]||(t[5]=e("p",{class:"text-gray-600 mb-2"},"Drag & drop your files here",-1)),t[6]||(t[6]=e("p",{class:"text-gray-500 text-sm mb-4"},"or",-1)),t[7]||(t[7]=e("label",{for:"fileInput",class:"cursor-pointer px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition"}," Browse Files ",-1)),e("input",{type:"file",id:"fileInput",class:"hidden",multiple:"",onChange:T},null,32)])]),n.value.length>0?(i(),o("div",ae,[t[10]||(t[10]=e("h3",{class:"font-medium text-gray-700 mb-2"},"Selected Files:",-1)),e("div",oe,[(i(!0),o(y,null,k(n.value,(l,a)=>(i(),o("div",{key:l.name+a,class:"flex items-center justify-between p-2 bg-gray-50 rounded"},[e("div",ie,[t[8]||(t[8]=e("i",{class:"fas fa-file text-indigo-500 mr-3"},null,-1)),e("div",null,[e("div",ne,r(l.name),1),e("div",re,r(V(l.size)),1)])]),e("button",{onClick:S=>D(a),class:"text-red-500 hover:text-red-700"},t[9]||(t[9]=[e("i",{class:"fas fa-times"},null,-1)]),8,de)]))),128))])])):C("",!0)]),e("div",ue,[t[16]||(t[16]=e("h3",{class:"font-medium text-gray-700 mb-2"},"Upload Summary:",-1)),e("div",ce,[e("div",fe,[t[12]||(t[12]=e("span",{class:"text-gray-600 mr-2"},"Folder:",-1)),e("span",me,r(d.value?.name||"Not selected"),1)]),e("div",pe,[t[13]||(t[13]=e("span",{class:"text-gray-600 mr-2"},"Category:",-1)),e("span",ge,r(v(h).find(l=>l.id===u.value)?.name||"Not selected"),1)]),e("div",xe,[t[14]||(t[14]=e("span",{class:"text-gray-600 mr-2"},"Files:",-1)),e("span",ve,r(n.value.length),1)])]),e("div",{class:"mt-4 flex justify-end"},[e("button",{onClick:I,class:"px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition flex items-center"},t[15]||(t[15]=[e("i",{class:"fas fa-upload mr-2"},null,-1),p(" Upload Files ",-1)]))])])])]),F(G,{name:"modal"},{default:z(()=>[_.value?(i(),o("div",ye,[e("div",be,[t[20]||(t[20]=e("h3",{class:"text-xl font-semibold mb-4"},"Create New Folder",-1)),e("div",he,[t[19]||(t[19]=e("label",{class:"block text-gray-700 mb-2"},"Folder Name",-1)),K(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>f.value=l),type:"text",class:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[L,f.value]])]),e("div",{class:"flex justify-end space-x-3"},[e("button",{onClick:w,class:"px-4 py-2 border rounded-md hover:bg-gray-50"},"Cancel"),e("button",{onClick:U,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"},"Create")])])])):C("",!0)]),_:1})]),_:1})],64))}}),Be=Y(_e,[["__scopeId","data-v-1edc0d77"]]);export{Be as default};
